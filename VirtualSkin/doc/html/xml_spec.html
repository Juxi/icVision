<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>VirtualSkin: Virtual Skin XML Specification</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
<h2><a class="anchor" id="zeroposition">
Zero Reference Position Kinematics</a></h2>
<p>The XML Specification used to model robots in Virtual Skin is based on the so called "Zero Reference Position" convention, which is much easier than the Denavit-Hartenberg convention. A detailed description of the convention is given in the paper cited in the following figure:</p>
<div align="center">
<img src="zeroposition.png" alt="zeroposition.png"/>
<p><strong>A simple schematic of the Zero Reference Position approach to kinematics in 2D using revolute joints. In the configuration shown, where all local coordinate systems are parallel, all joints are by definition in position zero.</strong></p></div>
<p>There are two differences between the convention described in the above paper and the implementation in Virtual Skin.</p>
<ol type="1">
<li>The displacements between joint axes need not be their mutual perpendicular</li>
<li>Prismatic joints are not supported</li>
</ol>
<h2><a class="anchor" id="modeling">
How To Model a Robot</a></h2>
<p>The idea behind the following XML specification, is that the user should describe the robot's skeleton using &lt;joint&gt; and &lt;link&gt; tags (more on those below). All vectors (joint axes and link axes) can be specified using the chosen world coordinate system, as it is aligned with all local coordinate systems. The hierarchy of the XML tags implies the arrangement of the joints and links, whereby the links (the bones of the skeleton) are positioned tip-to-tail with the joints in between them.</p>
<p>Cylindrical bounding volumes can be appended to links and joints automatically by providing a radius parameter. If the radius is omitted or set to zero, no bounding volume is created. Alternatively, bounding volumes can be created manually, by inserting &lt;sphere&gt;, &lt;cylinder&gt; and &lt;box&gt; tags into the XML hierarchy.</p>
<p>Finally, the XML specification also provides some structure for organizing the joints. The &lt;motor&gt; tag creates an interface to one or more joints, and the &lt;bodypart&gt; tag is used to define groups of motors, such that their encoder positions may be set all at once according to a list of values.</p>
<p>Following is a more in-depth description of the XML specification:</p>
<h2><a class="anchor" id="bodypart">
&lt;bodypart&gt; &lt;/bodypart&gt;</a></h2>
<p>Groups all motors in its scope by listing them in a BodyPart object, facilitating the function <a class="el" href="class_robot_model_1_1_robot.html#ad68d3bd2d8edbca49704f8a5b01055a1" title="Set the positions of each Motor in a particular BodyPart.">RobotModel::Robot::setEncoderPosition(int, const QVector&lt;qreal&gt;&amp;)</a></p>
<p>Parameters:</p>
<ul>
<li>name - (optional) A human-readable identifier for the BodyPart. Note: This is also used in naming/connecting to YARP ports."</li>
</ul>
<h2><a class="anchor" id="motor">
&lt;motor&gt; &lt;/motor&gt;</a></h2>
<p>Groups all joints in its scope by listing them in a Motor object, which introduces the concept of a "motor encoder". This has several benefits: The encoder position is abstracted from the physical joint angle, a single encoder position can specify the positions of several joints at the same time, and the motor control interfaces of most robots can therefore be modeled quickly and easily.</p>
<p>Parameters:</p>
<ul>
<li>idx - (optional) The position that the motor should occupy in a BodyPart vector. If you specify this for one Motor in a BodyPart, then you should do it for all Motors in that BodyPart</li>
<li>minPos - (optional) The minimum motor encoder position allowed. If omitted the default value (-1) is used.</li>
<li>maxPos - (optional) The maximum motor encoder position allowed. If omitted the default value (1) is used.</li>
<li>home - (optional) The 'home' encoder position. If omitted the default value (0) is used.</li>
</ul>
<h2><a class="anchor" id="link">
&lt;link&gt; &lt;/link&gt;</a></h2>
<p>Represents a body vector in the Zero Reference Position vernacular, or more intuitively, a 'bone' in your robot skeleton.</p>
<p>Parameters: It is required to set x, y, or z (at least one).</p>
<ul>
<li>x - The X component of the Link body vector</li>
<li>y - The Y component of the Link body vector</li>
<li>z - The Y component of the Link body vector</li>
<li>radius - (optional) If specified, a cylindrical bounding volume (of specified radius and length of the body vector) is added to the Link.</li>
<li>length - (optional) Scale the body vector to the desired length.</li>
</ul>
<h2><a class="anchor" id="joint">
&lt;joint&gt; &lt;/joint&gt;</a></h2>
<p>Represents a joint in the robot.</p>
<p>Parameters: It is required to set x, y, or z (at least one).</p>
<ul>
<li>x - The X component of the Joint axis</li>
<li>y - The Y component of the Joint axis</li>
<li>z - The Y component of the Joint axis</li>
<li>minPos - (optional) The minimum joint position allowed (in degrees away from Zero Position). If omitted the default value (-180) is used.</li>
<li>maxPos - (optional) The maximum joint position allowed (in degrees away from Zero Position). If omitted the default value (180) is used.</li>
<li>type - (optional) Currently only <code>revolute</code> is supported</li>
<li>radius - (optional) If specified, a cylindrical bounding volume (of specified radius and length of the joint axis) is added to the Link.</li>
<li>length - (optional) Scale the joint axis to the desired length.</li>
</ul>
<h2><a class="anchor" id="sphere">
&lt;sphere/&gt;</a></h2>
<p>Appends a sphere to the Joint or Link currently in scope</p>
<p>Parameters:</p>
<ul>
<li>radius - (required) must be greater than zero</li>
<li>px - (optional) the position of the sphere in the X direction. The default is zero.</li>
<li>py - (optional) the position of the sphere in the Y direction. The default is zero.</li>
<li>pz - (optional) the position of the sphere in the Z direction. The default is zero.</li>
</ul>
<h2><a class="anchor" id="cylinder">
&lt;cylinder/&gt;</a></h2>
<p>Appends a cylinder to the Joint or Link currently in scope. The vector [hx hy hz] is the cylinder's orientation direction (the axis of symmetry will be parallel to this vector). It is required to set hx, hy, or hz (at least one).</p>
<p>Parameters:</p>
<ul>
<li>radius - (required) must be greater than zero</li>
<li>height - (required) must be greater than zero</li>
<li>px - (optional) the position of the cylinder in the X direction. The default is zero.</li>
<li>py - (optional) the position of the cylinder in the Y direction. The default is zero.</li>
<li>pz - (optional) the position of the cylinder in the Z direction. The default is zero.</li>
<li>hx - the X component of the cylinder's orientation.</li>
<li>hy - the Y component of the cylinder's orientation.</li>
<li>hy - the Z component of the cylinder's orientation.</li>
</ul>
<h2><a class="anchor" id="box">
&lt;box/&gt;</a></h2>
<p>Appends a cylinder to the Joint or Link currently in scope. The vector [hx hy hz] is the cylinder's orientation direction (the axis of symmetry will be parallel to this vector). It is required to set hx, hy, or hz (at least one).</p>
<p>Parameters:</p>
<ul>
<li>radius - (required) must be greater than zero</li>
<li>height - (required) must be greater than zero</li>
<li>px - (optional) the position of the cylinder in the X direction. The default is zero.</li>
<li>py - (optional) the position of the cylinder in the Y direction. The default is zero.</li>
<li>pz - (optional) the position of the cylinder in the Z direction. The default is zero.</li>
<li>hx - the X component of the cylinder's orientation.</li>
<li>hy - the Y component of the cylinder's orientation.</li>
<li>hy - the Z component of the cylinder's orientation.</li>
</ul>
<h2><a class="anchor" id="marker">
&lt;marker/&gt;</a></h2>
<p>Provides access to a rotation/translation matrix of interest (the one in scope wherever you put this tag in the hierarchy). Currently, matrices from &lt;marker&gt; tags are aggregated in an <a class="el" href="class_robot_model_1_1_robot_observation.html" title="A RobotObservation object contains information on all &quot;markers&quot; placed...">RobotModel::RobotObservation</a> object and published via the signal RobotModel::Robot::Observation. This functionality has yet to be wrapped in YARP. Parameters:</p>
<ul>
<li>name - (optional) if omitted, markers will be named "marker1", "marker2", ect as they are encountered by the XML parser</li>
</ul>
<h2><a class="anchor" id="example">
A Brief Example - The iCub Torso</a></h2>
<div class="fragment"><pre class="fragment">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE ZeroPositionKinematicTree&gt;
&lt;ZeroPositionKinematicTree version="1.0" robotName="icub"&gt;

&lt;bodypart name="torso"&gt;
	&lt;!---------------------------------------------------------------------------
	  NOTE: In this file, we start from the WCS at the hips and move up. However
	  on the iCub robot torso joints are numbered backwards with respect to the
	  kinematic chain, therefore "idx" is specified for each
	  ---------------------------------------------------------------------------&gt;

	&lt;!-- The first joint --&gt;
	&lt;motor name="TorsoPitch" minPos="-22" maxPos="70" idx="2"&gt;
        &lt;joint y="-.2" minPos="-22" maxPos="70" radius=".04"&gt;
        
		&lt;!-----------------------------------------------------------------------------
		  These geometries are attached to the above joint, and do not move according
		  to the joint position. Only geometries associated with the children (links
		  or joints) move with the joint position.
		  -----------------------------------------------------------------------------&gt;
			
		&lt;!-- The mounting pole --&gt;
		&lt;cylinder radius=".04" height="1" pz="-.5" hz="1"/&gt;

		&lt;!-- The iCub's hips --&gt;
        	&lt;sphere radius=".07" px=".035" py=".06" pz="-.03"/&gt;
        	&lt;sphere radius=".07" px=".035" py="-.06" pz="-.03"/&gt;
        	&lt;sphere radius=".1" px=".035" pz="-.06"/&gt;
        
    		&lt;!-- An offset with no modeled geometry --&gt;
    		&lt;link z=".032" radius="0"&gt;
    
			&lt;!-- The second joint --&gt;
    			&lt;motor name="TorsoRoll" minPos="-30" maxPos="30" idx="1"&gt;
        		&lt;joint x=".1" minPos="-30" maxPos="30" radius=".0325"&gt;
    
				&lt;!-- An offset with no modeled geometry --&gt;
    				&lt;link x="-.0055" radius="0"&gt;
    
    					&lt;!-- The third joint --&gt;
					&lt;motor name="TorsoYaw" minPos="-50" maxPos="50" idx="0"&gt;  
				        &lt;joint z="-.05" minPos="-50" maxPos="50" radius="0"&gt;
        
						&lt;!-- Another offset --&gt;
						&lt;link x=".0233647" z=".1433" radius="0"&gt;

    							&lt;!-- Here would begin the neck --&gt;
    
						&lt;/link&gt;
        				&lt;/joint&gt;
    					&lt;/motor&gt;
    				&lt;/link&gt;
        		&lt;/joint&gt;
    			&lt;/motor&gt;
		&lt;/link&gt;
        &lt;/joint&gt;
	&lt;/motor&gt;
&lt;/bodypart&gt;

&lt;/ZeroPositionKinematicTree&gt;

</pre></div><p>01-05-2011, Kail Frank - <a href="mailto:kail@idsia.ch">kail@idsia.ch</a> </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
