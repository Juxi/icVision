<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>VirtualSkin: VirtualSkin::RobotFilter Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="namespace_virtual_skin.html">VirtualSkin</a>::<a class="el" href="class_virtual_skin_1_1_robot_filter.html">RobotFilter</a>
  </div>
</div>
<div class="contents">
<h1>VirtualSkin::RobotFilter Class Reference<br/>
<small>
[<a class="el" href="group___virtual_skin.html">VirtualSkin</a>]</small>
</h1><!-- doxytag: class="VirtualSkin::RobotFilter" -->
<p>This class provides a safety mechanism to protect a YARP device from unwanted collisions.  
<a href="#_details">More...</a></p>

<p><code>#include &lt;<a class="el" href="robot_filter_8h_source.html">robotFilter.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for VirtualSkin::RobotFilter:</div>
<div class="dynsection">
 <div class="center">
  <img src="class_virtual_skin_1_1_robot_filter.png" usemap="#VirtualSkin::RobotFilter_map" alt=""/>
  <map id="VirtualSkin::RobotFilter_map" name="VirtualSkin::RobotFilter_map">
<area href="class_reflex_filter.html" alt="ReflexFilter" shape="rect" coords="0,56,140,80"/>
</map>
 </div>
</div>

<p><a href="class_virtual_skin_1_1_robot_filter-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Public Slots</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#aff4a124525da6ce7b0f6217d57d00b85">takeControl</a> (int)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Provides a thread-safe mechanism to cut the filter connection and begin collision recovery.  <a href="#aff4a124525da6ce7b0f6217d57d00b85"></a><br/></td></tr>
<tr><td colspan="2"><h2>Signals</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#a2c581364fe207b1e9a47cbe6c27b3074">responseCompleteReturns</a> ()</td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#a360450f28d32c0ce8c9fefee77ace3be">RobotFilter</a> (bool visualize=false)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Connects the <a class="el" href="class_robot_model_1_1_model.html" title="Computes the current pose of the Robot and does collision detection using the SOLID...">RobotModel::Model</a> to the <a class="el" href="class_virtual_skin_1_1_robot_filter.html" title="This class provides a safety mechanism to protect a YARP device from unwanted collisions...">RobotFilter</a>, and initializes some members.  <a href="#a360450f28d32c0ce8c9fefee77ace3be"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#a023b1465a80479e54bd4a47ca958a5af">~RobotFilter</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Calls <a class="el" href="class_virtual_skin_1_1_robot_filter.html#af727d2bba23531237fdd21ac198a4726" title="Deletes all ControlBoardFilters and IObservers, returning the RobotFilter to the...">close()</a>.  <a href="#a023b1465a80479e54bd4a47ca958a5af"></a><br/></td></tr>
<tr><td class="memTemplParams" colspan="2">template&lt;class aStateObserver , class aCallObserver , class aResponseObserver &gt; </td></tr>
<tr><td class="memTemplItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#abd0bb555d57f9d978ac1b4a7c52a573d">open</a> (const QString &amp;fileName)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Builds a <a class="el" href="class_virtual_skin_1_1_robot_filter.html" title="This class provides a safety mechanism to protect a YARP device from unwanted collisions...">RobotFilter</a> for the <a class="el" href="class_robot_model_1_1_model.html" title="Computes the current pose of the Robot and does collision detection using the SOLID...">RobotModel::Model</a> described in the requested config file.  <a href="#abd0bb555d57f9d978ac1b4a7c52a573d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#af727d2bba23531237fdd21ac198a4726">close</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Deletes all ControlBoardFilters and IObservers, returning the <a class="el" href="class_virtual_skin_1_1_robot_filter.html" title="This class provides a safety mechanism to protect a YARP device from unwanted collisions...">RobotFilter</a> to the state it was in just after construction.  <a href="#af727d2bba23531237fdd21ac198a4726"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#a3ce7a6f5265b93915ef04789f6042d3c">extraOpenStuff</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is called shortly before <a class="el" href="class_virtual_skin_1_1_robot_filter.html#abd0bb555d57f9d978ac1b4a7c52a573d" title="Builds a RobotFilter for the RobotModel::Model described in the requested config...">open&lt;&gt;(const QString&amp;)</a> returns.  <a href="#a3ce7a6f5265b93915ef04789f6042d3c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#a8a46b86bd058a438a0fc31b2f10172d4">collisionResponse</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Provides a mechanism to respond to collision events by injecting control code. See the implementation in <a class="el" href="class_reflex_filter.html" title="A VirtualSkin::RobotFilter with reflexive collision response.">ReflexFilter</a>.  <a href="#a8a46b86bd058a438a0fc31b2f10172d4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#a0c41dd46176cebc771515deaad55fee8">responseComplete</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Should waits for the commands issued in <a class="el" href="class_virtual_skin_1_1_robot_filter.html#a8a46b86bd058a438a0fc31b2f10172d4" title="Provides a mechanism to respond to collision events by injecting control code. See...">collisionResponse()</a> to finish running.  <a href="#a0c41dd46176cebc771515deaad55fee8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#ad0091b67c21e0c57e77749e3ed205931">openStatusPort</a> (const QString &amp;name)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open a YARP port that streams a boolean indicating the status of the <a class="el" href="class_virtual_skin_1_1_robot_filter.html" title="This class provides a safety mechanism to protect a YARP device from unwanted collisions...">RobotFilter</a>.  <a href="#ad0091b67c21e0c57e77749e3ed205931"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#a4bd1aaf8a79af150a720a6d070fa3906">closeStatusPort</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Closes the Yarp stream port indicating whether or not the filter is connected.  <a href="#a4bd1aaf8a79af150a720a6d070fa3906"></a><br/></td></tr>
<tr><td colspan="2"><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_virtual_skin_1_1_yarp_model.html">YarpModel</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#aecb6bb54472069b368a06fb0b81374dd">model</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The model that controls the opening and closing of the filter.  <a href="#aecb6bb54472069b368a06fb0b81374dd"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Slots</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#ab9703050ec0030524e92839d24dda0fc">openFilter</a> ()</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_virtual_skin_1_1_yarp_stream_port.html">YarpStreamPort</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#a1475beef6b4a16d17eb2a8c8871a44aa">statusPort</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">yarp::os::Bottle&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#a4ccd5c3a929028ed7a14976f97d35893">stop_command</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">TODO: Make this not iCub specific.  <a href="#a4ccd5c3a929028ed7a14976f97d35893"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#a049c9a7ce112f3134208916c4f94cc19">isOpen</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Indicates whether or not filter is forwarding commands.  <a href="#a049c9a7ce112f3134208916c4f94cc19"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#a83c5e63327e46f0d5ab225a5b72835c2">haveControl</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Indicates whether or not the filter currently has control of the robot.  <a href="#a83c5e63327e46f0d5ab225a5b72835c2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#a738f69b4b6640747748b4beeee3fbad7">isColliding</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Indicates whether or not the robot's current pose is colliding.  <a href="#a738f69b4b6640747748b4beeee3fbad7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QVector<br class="typebreak"/>
&lt; <a class="el" href="classyarp_1_1os_1_1_control_board_filter.html">yarp::os::ControlBoardFilter</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#a47c2dd6bbac0a09416a5c04e16530318">cbFilters</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A QVector of ControlBoardFilters - one for each of the robot's BodyParts.  <a href="#a47c2dd6bbac0a09416a5c04e16530318"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QVector&lt; <a class="el" href="class_virtual_skin_1_1_state_observer.html">StateObserver</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#ae6ee22251bdf7a13f2c779d617eca740">stateObservers</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A QVector of IObservers. Each is bound to the state port of a BodyPart, and logs its history in a <a class="el" href="class_virtual_skin_1_1_circular_buffer.html" title="A simple circular buffer of QVectors.">CircularBuffer</a>.  <a href="#ae6ee22251bdf7a13f2c779d617eca740"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QVector&lt; <a class="el" href="class_virtual_skin_1_1_call_observer.html">CallObserver</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#aeccf2ace0ba56a2eeecc47be3fe9549f">callObservers</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A QVector of IObservers that monitor RPC calls.  <a href="#aeccf2ace0ba56a2eeecc47be3fe9549f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QVector&lt; <a class="el" href="class_virtual_skin_1_1_response_observer.html">ResponseObserver</a> * &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#a2ad49c69af7d91dd3539ce8fdfae9a74">responseObservers</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A QVector of IObservers that monitor RPC responses.  <a href="#a2ad49c69af7d91dd3539ce8fdfae9a74"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#a8c8926cdd5bce1a7a3f0f9b29fa07ad6">start</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Starts collision response.  <a href="#a8c8926cdd5bce1a7a3f0f9b29fa07ad6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_virtual_skin_1_1_robot_filter.html#ab9eb900478b4c2836666570c79f9d1f2">run</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Collision response is handled in a separate thread so as not to interrupt anything.  <a href="#ab9eb900478b4c2836666570c79f9d1f2"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This class provides a safety mechanism to protect a YARP device from unwanted collisions. </p>
<p>The <a class="el" href="class_virtual_skin_1_1_robot_filter.html" title="This class provides a safety mechanism to protect a YARP device from unwanted collisions...">RobotFilter</a> is intended to protect the robot by filtering motor control commands that may lead to unwanted collisions. It duplicates the motor control ports for your robot, and forwards commands from the duplicates to the real ones as long as the filter is connected. The filter is controlled by a kinematic model of the robot (see <a class="el" href="class_virtual_skin_1_1_yarp_model.html" title="Wraps RobotModel::Model with YARP functionality.">YarpModel</a> and <a class="el" href="class_robot_model_1_1_model.html" title="Computes the current pose of the Robot and does collision detection using the SOLID...">RobotModel::Model</a>) that reads the streams of encoder positions from the real robot, computes the forward kinematics and does collision detection. If unwanted collisions are found, the filter cuts its connection between the duplicate ports and the real ones, thereby effectively ignoring the user until a pure virutal handler function (<a class="el" href="class_virtual_skin_1_1_robot_filter.html#a8a46b86bd058a438a0fc31b2f10172d4" title="Provides a mechanism to respond to collision events by injecting control code. See...">collisionResponse()</a>) returns.</p>
<p>The user is free to implement <a class="el" href="class_virtual_skin_1_1_robot_filter.html#a8a46b86bd058a438a0fc31b2f10172d4" title="Provides a mechanism to respond to collision events by injecting control code. See...">collisionResponse()</a> in any way they like. An example of a simple reflexive response to collision is implemented in <a class="el" href="class_reflex_filter.html" title="A VirtualSkin::RobotFilter with reflexive collision response.">ReflexFilter</a>. The implementation of <a class="el" href="class_virtual_skin_1_1_robot_filter.html" title="This class provides a safety mechanism to protect a YARP device from unwanted collisions...">RobotFilter</a> is built on YarpFilter. In order to empower the user to gather the data needed to handle collisions in arbitrary ways, the <a class="el" href="class_virtual_skin_1_1_robot_filter.html" title="This class provides a safety mechanism to protect a YARP device from unwanted collisions...">RobotFilter</a> supports the extension helper-classes of YarpFilter (<a class="el" href="class_virtual_skin_1_1_state_observer.html" title="An IObserver implemented to monitor streaming state information (motor encoder values)...">StateObserver</a>, <a class="el" href="class_virtual_skin_1_1_call_observer.html" title="An IObserver implemented to monitor RPC calls.">CallObserver</a> and <a class="el" href="class_virtual_skin_1_1_response_observer.html" title="An IObserver implemented to monitor RPC responses.">ResponseObserver</a>) can be extended, and the resulting sub-classes passed to the <a class="el" href="class_virtual_skin_1_1_robot_filter.html" title="This class provides a safety mechanism to protect a YARP device from unwanted collisions...">RobotFilter</a> via the templated <a class="el" href="class_virtual_skin_1_1_robot_filter.html#abd0bb555d57f9d978ac1b4a7c52a573d" title="Builds a RobotFilter for the RobotModel::Model described in the requested config...">open&lt;aStateObserver,aCallObserver,aResponseObserver&gt;( const QString&amp; )</a> function. </p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a360450f28d32c0ce8c9fefee77ace3be"></a><!-- doxytag: member="VirtualSkin::RobotFilter::RobotFilter" ref="a360450f28d32c0ce8c9fefee77ace3be" args="(bool visualize=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RobotFilter::RobotFilter </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>visualize</em> = <code>false</code></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Connects the <a class="el" href="class_robot_model_1_1_model.html" title="Computes the current pose of the Robot and does collision detection using the SOLID...">RobotModel::Model</a> to the <a class="el" href="class_virtual_skin_1_1_robot_filter.html" title="This class provides a safety mechanism to protect a YARP device from unwanted collisions...">RobotFilter</a>, and initializes some members. </p>

</div>
</div>
<a class="anchor" id="a023b1465a80479e54bd4a47ca958a5af"></a><!-- doxytag: member="VirtualSkin::RobotFilter::~RobotFilter" ref="a023b1465a80479e54bd4a47ca958a5af" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">RobotFilter::~RobotFilter </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calls <a class="el" href="class_virtual_skin_1_1_robot_filter.html#af727d2bba23531237fdd21ac198a4726" title="Deletes all ControlBoardFilters and IObservers, returning the RobotFilter to the...">close()</a>. </p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="af727d2bba23531237fdd21ac198a4726"></a><!-- doxytag: member="VirtualSkin::RobotFilter::close" ref="af727d2bba23531237fdd21ac198a4726" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RobotFilter::close </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Deletes all ControlBoardFilters and IObservers, returning the <a class="el" href="class_virtual_skin_1_1_robot_filter.html" title="This class provides a safety mechanism to protect a YARP device from unwanted collisions...">RobotFilter</a> to the state it was in just after construction. </p>

</div>
</div>
<a class="anchor" id="a4bd1aaf8a79af150a720a6d070fa3906"></a><!-- doxytag: member="VirtualSkin::RobotFilter::closeStatusPort" ref="a4bd1aaf8a79af150a720a6d070fa3906" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualSkin::RobotFilter::closeStatusPort </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Closes the Yarp stream port indicating whether or not the filter is connected. </p>

</div>
</div>
<a class="anchor" id="a8a46b86bd058a438a0fc31b2f10172d4"></a><!-- doxytag: member="VirtualSkin::RobotFilter::collisionResponse" ref="a8a46b86bd058a438a0fc31b2f10172d4" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void VirtualSkin::RobotFilter::collisionResponse </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Provides a mechanism to respond to collision events by injecting control code. See the implementation in <a class="el" href="class_reflex_filter.html" title="A VirtualSkin::RobotFilter with reflexive collision response.">ReflexFilter</a>. </p>
<p>This is executed once the <a class="el" href="class_virtual_skin_1_1_robot_filter.html" title="This class provides a safety mechanism to protect a YARP device from unwanted collisions...">RobotFilter</a> has detected collisions and cut its connection. </p>

<p>Reimplemented in <a class="el" href="class_reflex_filter.html#a3a9baca5af392208099867d8d9340fd4">ReflexFilter</a>.</p>

</div>
</div>
<a class="anchor" id="a3ce7a6f5265b93915ef04789f6042d3c"></a><!-- doxytag: member="VirtualSkin::RobotFilter::extraOpenStuff" ref="a3ce7a6f5265b93915ef04789f6042d3c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void VirtualSkin::RobotFilter::extraOpenStuff </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This is called shortly before <a class="el" href="class_virtual_skin_1_1_robot_filter.html#abd0bb555d57f9d978ac1b4a7c52a573d" title="Builds a RobotFilter for the RobotModel::Model described in the requested config...">open&lt;&gt;(const QString&amp;)</a> returns. </p>
<p>In your sub-classes, replace the empty implementation with any initialization code required. For an example of this, see <a class="el" href="class_reflex_filter.html" title="A VirtualSkin::RobotFilter with reflexive collision response.">ReflexFilter</a>. </p>

<p>Reimplemented in <a class="el" href="class_reflex_filter.html#af7d17a4e115d9260ff00271fdd7ac6fd">ReflexFilter</a>.</p>

</div>
</div>
<a class="anchor" id="abd0bb555d57f9d978ac1b4a7c52a573d"></a><!-- doxytag: member="VirtualSkin::RobotFilter::open" ref="abd0bb555d57f9d978ac1b4a7c52a573d" args="(const QString &amp;fileName)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class aStateObserver , class aCallObserver , class aResponseObserver &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool VirtualSkin::RobotFilter::open </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>fileName</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Builds a <a class="el" href="class_virtual_skin_1_1_robot_filter.html" title="This class provides a safety mechanism to protect a YARP device from unwanted collisions...">RobotFilter</a> for the <a class="el" href="class_robot_model_1_1_model.html" title="Computes the current pose of the Robot and does collision detection using the SOLID...">RobotModel::Model</a> described in the requested config file. </p>
<p>The filter consists of a <a class="el" href="classyarp_1_1os_1_1_control_board_filter.html" title="A proxy for a YARP device driver that can also filter data.">yarp::os::ControlBoardFilter</a> for each <a class="el" href="class_robot_model_1_1_body_part.html" title="Allows motors to be controlled via groups such as &#39;torso&#39;, &#39;head&#39;...">RobotModel::BodyPart</a> specified in the config file. The ControlBoardFilters require some helper classes (<a class="el" href="class_virtual_skin_1_1_state_observer.html" title="An IObserver implemented to monitor streaming state information (motor encoder values)...">StateObserver</a>, <a class="el" href="class_virtual_skin_1_1_call_observer.html" title="An IObserver implemented to monitor RPC calls.">CallObserver</a> and <a class="el" href="class_virtual_skin_1_1_response_observer.html" title="An IObserver implemented to monitor RPC responses.">ResponseObserver</a>), which can be extended to provide additional functionality. To open a 'standard' <a class="el" href="class_virtual_skin_1_1_robot_filter.html" title="This class provides a safety mechanism to protect a YARP device from unwanted collisions...">RobotFilter</a> full of 'standard' ControlBoardFilters, call open&lt;StateObserver,CallObserver,ResponseObserver&gt;( "configFile.xml" ). For an example of this, see PATH_TO_YOUR_GIT_REPOSITORY/virtualSkin/ReflexDemo/main.cpp. If you need a custom ControlBoardFilter, extend <a class="el" href="class_virtual_skin_1_1_state_observer.html" title="An IObserver implemented to monitor streaming state information (motor encoder values)...">StateObserver</a>, <a class="el" href="class_virtual_skin_1_1_call_observer.html" title="An IObserver implemented to monitor RPC calls.">CallObserver</a> and <a class="el" href="class_virtual_skin_1_1_response_observer.html" title="An IObserver implemented to monitor RPC responses.">ResponseObserver</a>, and pass the sub-types to the <a class="el" href="class_virtual_skin_1_1_robot_filter.html#abd0bb555d57f9d978ac1b4a7c52a573d" title="Builds a RobotFilter for the RobotModel::Model described in the requested config...">open&lt;aStateObserver,aCallObserver,aResponseObserver&gt;(const QString&amp;)</a> method.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>aStateObserver,aCallObserver,aResponseObserver MUST be sub-classes of <a class="el" href="class_virtual_skin_1_1_state_observer.html" title="An IObserver implemented to monitor streaming state information (motor encoder values)...">StateObserver</a>,<a class="el" href="class_virtual_skin_1_1_call_observer.html" title="An IObserver implemented to monitor RPC calls.">CallObserver</a>,<a class="el" href="class_virtual_skin_1_1_response_observer.html" title="An IObserver implemented to monitor RPC responses.">ResponseObserver</a> respectively </dd></dl>

</div>
</div>
<a class="anchor" id="ab9703050ec0030524e92839d24dda0fc"></a><!-- doxytag: member="VirtualSkin::RobotFilter::openFilter" ref="ab9703050ec0030524e92839d24dda0fc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RobotFilter::openFilter </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [protected, slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad0091b67c21e0c57e77749e3ed205931"></a><!-- doxytag: member="VirtualSkin::RobotFilter::openStatusPort" ref="ad0091b67c21e0c57e77749e3ed205931" args="(const QString &amp;name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualSkin::RobotFilter::openStatusPort </td>
          <td>(</td>
          <td class="paramtype">const QString &amp;&nbsp;</td>
          <td class="paramname"> <em>name</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Open a YARP port that streams a boolean indicating the status of the <a class="el" href="class_virtual_skin_1_1_robot_filter.html" title="This class provides a safety mechanism to protect a YARP device from unwanted collisions...">RobotFilter</a>. </p>
<p>A 1 indicates the filter is connected and motor commands are being forwarded, whereas a 0 indicates that the filter has been cut and motor commands are being ignored. </p>

</div>
</div>
<a class="anchor" id="a0c41dd46176cebc771515deaad55fee8"></a><!-- doxytag: member="VirtualSkin::RobotFilter::responseComplete" ref="a0c41dd46176cebc771515deaad55fee8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void VirtualSkin::RobotFilter::responseComplete </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Should waits for the commands issued in <a class="el" href="class_virtual_skin_1_1_robot_filter.html#a8a46b86bd058a438a0fc31b2f10172d4" title="Provides a mechanism to respond to collision events by injecting control code. See...">collisionResponse()</a> to finish running. </p>
<p>This is called right after <a class="el" href="class_virtual_skin_1_1_robot_filter.html#a8a46b86bd058a438a0fc31b2f10172d4" title="Provides a mechanism to respond to collision events by injecting control code. See...">collisionResponse()</a> and runs in its own thread. the user is responsible for deciding what it means that control commands are "finished" executing, which clearly depends on the kinds of commands issued in the first place. </p>

<p>Reimplemented in <a class="el" href="class_reflex_filter.html#a8987921ba84bd8b70a5340711af97550">ReflexFilter</a>.</p>

</div>
</div>
<a class="anchor" id="a2c581364fe207b1e9a47cbe6c27b3074"></a><!-- doxytag: member="VirtualSkin::RobotFilter::responseCompleteReturns" ref="a2c581364fe207b1e9a47cbe6c27b3074" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualSkin::RobotFilter::responseCompleteReturns </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [signal]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab9eb900478b4c2836666570c79f9d1f2"></a><!-- doxytag: member="VirtualSkin::RobotFilter::run" ref="ab9eb900478b4c2836666570c79f9d1f2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RobotFilter::run </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Collision response is handled in a separate thread so as not to interrupt anything. </p>

</div>
</div>
<a class="anchor" id="a8c8926cdd5bce1a7a3f0f9b29fa07ad6"></a><!-- doxytag: member="VirtualSkin::RobotFilter::start" ref="a8c8926cdd5bce1a7a3f0f9b29fa07ad6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void VirtualSkin::RobotFilter::start </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Starts collision response. </p>

</div>
</div>
<a class="anchor" id="aff4a124525da6ce7b0f6217d57d00b85"></a><!-- doxytag: member="VirtualSkin::RobotFilter::takeControl" ref="aff4a124525da6ce7b0f6217d57d00b85" args="(int)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void RobotFilter::takeControl </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>collisions</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [slot]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Provides a thread-safe mechanism to cut the filter connection and begin collision recovery. </p>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="aeccf2ace0ba56a2eeecc47be3fe9549f"></a><!-- doxytag: member="VirtualSkin::RobotFilter::callObservers" ref="aeccf2ace0ba56a2eeecc47be3fe9549f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QVector&lt;<a class="el" href="class_virtual_skin_1_1_call_observer.html">CallObserver</a>*&gt; <a class="el" href="class_virtual_skin_1_1_robot_filter.html#aeccf2ace0ba56a2eeecc47be3fe9549f">VirtualSkin::RobotFilter::callObservers</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A QVector of IObservers that monitor RPC calls. </p>

</div>
</div>
<a class="anchor" id="a47c2dd6bbac0a09416a5c04e16530318"></a><!-- doxytag: member="VirtualSkin::RobotFilter::cbFilters" ref="a47c2dd6bbac0a09416a5c04e16530318" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QVector&lt;<a class="el" href="classyarp_1_1os_1_1_control_board_filter.html">yarp::os::ControlBoardFilter</a> *&gt; <a class="el" href="class_virtual_skin_1_1_robot_filter.html#a47c2dd6bbac0a09416a5c04e16530318">VirtualSkin::RobotFilter::cbFilters</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A QVector of ControlBoardFilters - one for each of the robot's BodyParts. </p>
<p>These filters have a 1-to-1 correspondence to the YARP (server) control board drivers of the robot. </p>

</div>
</div>
<a class="anchor" id="a83c5e63327e46f0d5ab225a5b72835c2"></a><!-- doxytag: member="VirtualSkin::RobotFilter::haveControl" ref="a83c5e63327e46f0d5ab225a5b72835c2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_virtual_skin_1_1_robot_filter.html#a83c5e63327e46f0d5ab225a5b72835c2">VirtualSkin::RobotFilter::haveControl</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Indicates whether or not the filter currently has control of the robot. </p>

</div>
</div>
<a class="anchor" id="a738f69b4b6640747748b4beeee3fbad7"></a><!-- doxytag: member="VirtualSkin::RobotFilter::isColliding" ref="a738f69b4b6640747748b4beeee3fbad7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_virtual_skin_1_1_robot_filter.html#a738f69b4b6640747748b4beeee3fbad7">VirtualSkin::RobotFilter::isColliding</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Indicates whether or not the robot's current pose is colliding. </p>

</div>
</div>
<a class="anchor" id="a049c9a7ce112f3134208916c4f94cc19"></a><!-- doxytag: member="VirtualSkin::RobotFilter::isOpen" ref="a049c9a7ce112f3134208916c4f94cc19" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="class_virtual_skin_1_1_robot_filter.html#a049c9a7ce112f3134208916c4f94cc19">VirtualSkin::RobotFilter::isOpen</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Indicates whether or not filter is forwarding commands. </p>

</div>
</div>
<a class="anchor" id="aecb6bb54472069b368a06fb0b81374dd"></a><!-- doxytag: member="VirtualSkin::RobotFilter::model" ref="aecb6bb54472069b368a06fb0b81374dd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_virtual_skin_1_1_yarp_model.html">YarpModel</a> <a class="el" href="class_virtual_skin_1_1_robot_filter.html#aecb6bb54472069b368a06fb0b81374dd">VirtualSkin::RobotFilter::model</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The model that controls the opening and closing of the filter. </p>
<p>It is public so that the user has access to the information that was read out of the robot configuration file, such as the name of the robot and the number of controllable axes for example </p>

</div>
</div>
<a class="anchor" id="a2ad49c69af7d91dd3539ce8fdfae9a74"></a><!-- doxytag: member="VirtualSkin::RobotFilter::responseObservers" ref="a2ad49c69af7d91dd3539ce8fdfae9a74" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QVector&lt;<a class="el" href="class_virtual_skin_1_1_response_observer.html">ResponseObserver</a>*&gt; <a class="el" href="class_virtual_skin_1_1_robot_filter.html#a2ad49c69af7d91dd3539ce8fdfae9a74">VirtualSkin::RobotFilter::responseObservers</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A QVector of IObservers that monitor RPC responses. </p>

</div>
</div>
<a class="anchor" id="ae6ee22251bdf7a13f2c779d617eca740"></a><!-- doxytag: member="VirtualSkin::RobotFilter::stateObservers" ref="ae6ee22251bdf7a13f2c779d617eca740" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QVector&lt;<a class="el" href="class_virtual_skin_1_1_state_observer.html">StateObserver</a>*&gt; <a class="el" href="class_virtual_skin_1_1_robot_filter.html#ae6ee22251bdf7a13f2c779d617eca740">VirtualSkin::RobotFilter::stateObservers</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A QVector of IObservers. Each is bound to the state port of a BodyPart, and logs its history in a <a class="el" href="class_virtual_skin_1_1_circular_buffer.html" title="A simple circular buffer of QVectors.">CircularBuffer</a>. </p>

</div>
</div>
<a class="anchor" id="a1475beef6b4a16d17eb2a8c8871a44aa"></a><!-- doxytag: member="VirtualSkin::RobotFilter::statusPort" ref="a1475beef6b4a16d17eb2a8c8871a44aa" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_virtual_skin_1_1_yarp_stream_port.html">YarpStreamPort</a> <a class="el" href="class_virtual_skin_1_1_robot_filter.html#a1475beef6b4a16d17eb2a8c8871a44aa">VirtualSkin::RobotFilter::statusPort</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Published the (open/closed) status of the filter </p>

</div>
</div>
<a class="anchor" id="a4ccd5c3a929028ed7a14976f97d35893"></a><!-- doxytag: member="VirtualSkin::RobotFilter::stop_command" ref="a4ccd5c3a929028ed7a14976f97d35893" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">yarp::os::Bottle <a class="el" href="class_virtual_skin_1_1_robot_filter.html#a4ccd5c3a929028ed7a14976f97d35893">VirtualSkin::RobotFilter::stop_command</a><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>TODO: Make this not iCub specific. </p>
<p>Stores an RPC command to stop the iCub robot </p>
<dl class="note"><dt><b>Note:</b></dt><dd>This is iCub specific, and it should be done differently in the future </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/Users/kail/imClever/dev/VirtualSkin/src/VirtualSkinLibrary/<a class="el" href="robot_filter_8h_source.html">robotFilter.h</a></li>
<li>/Users/kail/imClever/dev/VirtualSkin/src/VirtualSkinLibrary/<a class="el" href="robot_filter_8cpp.html">robotFilter.cpp</a></li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
