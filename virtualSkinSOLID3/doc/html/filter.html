<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>VirtualSkin: YARP Filter Detail</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="filter">YARP Filter Detail </a></h1><h2><a class="anchor" id="YARP">
RemoteControlBoard</a></h2>
<p>The <a href="http://eris.liralab.it/yarpdoc/classyarp_1_1dev_1_1RemoteControlBoard.html">RemoteControlBoard</a> is YARP's interface to a motor, and to each instance belongs three YARP ports:</p>
<ul>
<li>/NameOfYourRemoteControlBoard/command:i</li>
<li>/NameOfYourRemoteControlBoard/state:o</li>
<li>/NameOfYourRemoteControlBoard/rpc:i</li>
</ul>
<p>The YarpFilter creates a trio of ports named:</p>
<ul>
<li>/NameOfYourRemoteControlBoardF/command:i</li>
<li>/NameOfYourRemoteControlBoardF/state:o</li>
<li>/NameOfYourRemoteControlBoardF/rpc:i</li>
</ul>
<p>... and connects them to the RemoteControlBoard as shown here:</p>
<div align="center">
<img src="controlboardfilter.png" alt="controlboardfilter.png"/>
<p><strong>Control Board Filter Architecture</strong></p></div>
<p> As you can see, the names of the filtered ports reflect the names of the unfiltered iCub motor control ports, however an "F" has been appended to the robot name to signify that the port is filtered. The filtered ports allow transparent access to the underlying RemoteControlBoard, however during the course of execution, the filter can intervene in two ways:</p>
<ol type="1">
<li>Cut the connection between the filtered ports and the RemoteControlBoard, such that motor control commands are no longer forwarded</li>
<li>Inject commands into the RemoteControlBoard whether or not the connection has been cut.</li>
</ol>
<p>Furthermore, the YarpFilter provides a mechanism for you to analyze the data passing through the filter and build your own custom handlers for that data. The IObserver interface can be inherited into your custom handler class, such that its onDataObserved() method is called every time data moves through the filter. Similarly, the IReplier interface can be inherited into your custom handler of RPC calls, which will only be invoked when the filter is cut (after all the RPC client expects a response). Of course, in order to activate your custom handlers you have to pass them to the YarpFilter object.</p>
<p>Consider the following example:</p>
<div class="fragment"><pre class="fragment">
yarp::os::ControlBoardFilter cbf;
YourIObserverChildClass observer;
YourIReplierChildClass replier;

cbf.setStateObserver(&amp;observer);
cbf.setCommandObserver(&amp;observer);
cbf.setCallObserver(&amp;observer);
cbf.setResponseObserver(&amp;observer);
cbf.setReplier(&amp;replier);
</pre></div><p>2011-01-01, Kail Frank - <a href="mailto:kail@idsia.ch">kail@idsia.ch</a> </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
