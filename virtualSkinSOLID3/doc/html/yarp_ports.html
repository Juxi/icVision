<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>VirtualSkin: Virtual Skin YARP Ports</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
<h2><a class="anchor" id="Prerequisites">
Prerequisites</a></h2>
<p>If you haven't done so already, please read . Before you connect to the ports described here, make sure you have <a class="el" href="reflexdemo.html#skin">Reflex Demo</a> running, and if you want to see anything interesting on <a class="el" href="yarp_ports.html#status">Filter Status Port: /NameOfYourRobotF/status</a> or <a class="el" href="yarp_ports.html#collisions">Collision Reporting Port: /NameOfYourRobotF/collisions</a>, make sure that <a class="el" href="reflexdemo.html#babbler">iCubBabbler</a> is also running. The aforementioned tutorials assume you are working with the iCub robot. If that is the case, then throughout this document "NameOfYourRobot" should be replaced by "icub" or "icubSim" depending on whether you have connected the filter to the hardware or the simulator.</p>
<h2><a class="anchor" id="status">
Filter Status Port: /NameOfYourRobotF/status</a></h2>
<p>To connect to the port run: </p>
<div class="fragment"><pre class="fragment">yarp read /status </pre></div><p> Then, in a new terminal: </p>
<div class="fragment"><pre class="fragment">yarp connect /icubSimF/status /status </pre></div><p>The filter status port simply streams a boolean value, indicating the status of the filter. A 1 means the filter is connected, and messages are being forwarded, whereas a 0 means that the filter has been cut, and messages are not being forwarded.</p>
<h2><a class="anchor" id="collisions">
Collision Reporting Port: /NameOfYourRobotF/collisions</a></h2>
<p>To connect to the port run: </p>
<div class="fragment"><pre class="fragment">yarp read /collisions </pre></div><p> Then, in a new terminal: </p>
<div class="fragment"><pre class="fragment">yarp connect /icubSimF/collisions /collisions </pre></div><p>The collisions port streams the positions of collisions as they occur. Each collision is considered to involve exactly two geometries and to occur at exactly one point in cartesian space. That point is expressed twice, once in each of the local coordinate systems associated with the two colliding geometries (see "witnessed response" in the <a href="http://www.win.tue.nl/~gino/solid/solid2.html#SEC14">FreeSOLID Documentation</a>). Each bottle in the stream represents a state of the entire robot, and collision events are therefore nested therein according to the following structure:</p>
<p>A point of collision on a geometry is represented in the local coordinate system of that geometry as a collision-point-bottle: </p>
<div class="fragment"><pre class="fragment">( geom-index x-position y-position z-position ) </pre></div><p>A collision is represented by two such collision-point-bottles nested in a collision-bottle: </p>
<div class="fragment"><pre class="fragment">(( geom1-index x-position y-position z-position )( geom2-index x-position y-position z-position )) </pre></div><p>The state of the robot may involve many collisions, so all the collision-bottles are nested within a state-bottle. </p>
<div class="fragment"><pre class="fragment">
(
	(( geom1-index x-position y-position z-position )( geom2-index x-position y-position z-position ))
	(( geom1-index x-position y-position z-position )( geom3-index x-position y-position z-position )) 
	(( geom2-index x-position y-position z-position )( geom3-index x-position y-position z-position )) 
)
</pre></div><p>It is these state-bottles that are streamed on the collisions port.</p>
<h2><a class="anchor" id="world">
World RPC Interface Port: /NameOfYourRobotF/world</a></h2>
<p>This RPC port allows you to add/update/remove objects to/in/from the world. Try connecting to it with: </p>
<div class="fragment"><pre class="fragment">
yarp rpc /NameOfYourRobotF/world
</pre></div><p>The RPC commands to interact with the world are very similar to the ones you would use with the iCub Simulator. Moreover, naming is handled the same way as in the Simulator, so the first time you make a sphere, it is named 'sph1', the second time it is 'sph2', ect. Deleting objects does not affect this naming. Only the command <code>clr</code>, which removes all objects, can reset the counters associated with naming.</p>
<p>The World RPC Interface of Virtual Skin differs from that of icub_SIM in the following ways:</p>
<ul>
<li>Although commands may begin with 'world', this need not be the case</li>
<li>The objects 'box' and 'sbox', 'cyl' and 'scyl', 'sph' and 'ssph' are exactly the same respectively (Virtual Skin is not a dynamic simulation)</li>
<li>Colors are not respected, however it won't hurt your commands if you specify them.</li>
<li>The 'get' command is currently unsupported and will return 'unknown command' (since there are no dynamics, objects are wherever you put them last)</li>
<li>There are commands to append objects to other objects and to delete individual objects (summarized below)</li>
</ul>
<p>IMPORTANT: The world coordinate system used here is defined with respect to the robot such that:</p>
<ul>
<li>Z is up</li>
<li>X is behind</li>
<li>Y is right</li>
</ul>
<p>This is the same convention used by the <a href="http://eris.liralab.it/wiki/ICubForwardKinematics">iCub Kinematics</a>. For some reason, this is not the convention used in the iCub Simulator.</p>
<p>Here is a list of supported commands:</p>
<p>To make a box: </p>
<div class="fragment"><pre class="fragment">
mk box (three params for size) (three params for position)
mk sbox (three params for size) (three params for position)
</pre></div> <dl class="note"><dt><b>Note:</b></dt><dd><ul>
<li>Any omitted params are assumed to be zero, so you do not have to set the position to '0 0 0' explicitly.</li>
</ul>
</dd></dl>
<p>To make a sphere: </p>
<div class="fragment"><pre class="fragment">
mk sph (radius) (three params for position)
mk ssph (radius) (three params for position)
</pre></div> <dl class="note"><dt><b>Note:</b></dt><dd><ul>
<li>Any omitted params are assumed to be zero, so you do not have to set the position to '0 0 0' explicitly.</li>
</ul>
</dd></dl>
<p>To make a cylinder: </p>
<div class="fragment"><pre class="fragment">
mk cyl (radius length) (three params for position)
mk scyl (radius length) (three params for position)
</pre></div> <dl class="note"><dt><b>Note:</b></dt><dd><ul>
<li>Any omitted params are assumed to be zero, so you do not have to set the position to '0 0 0' explicitly.</li>
</ul>
</dd></dl>
<p>To make a constructive solid geometry (CSG) object: </p>
<div class="fragment"><pre class="fragment">
mk csg (name) (three params for position)
</pre></div> <dl class="note"><dt><b>Note:</b></dt><dd><ul>
<li>This is not a full-featured CSG object. It just allows you define an object as the union of several primitives, which need not be intersecting.</li>
<li>Any omitted params are assumed to be zero, so you do not have to set the position to '0 0 0' explicitly.</li>
</ul>
</dd></dl>
<p>To set the position of an object: </p>
<div class="fragment"><pre class="fragment">
set (name) (three params for position)
set (type) (index) (three params for position)
</pre></div> <dl class="note"><dt><b>Note:</b></dt><dd><ul>
<li>The second syntax is implemented in order to maintain compatibility with the iCub Simulator, so 'type' must be <code>box</code>, <code>cyl</code>, or <code>sph</code>.</li>
</ul>
</dd></dl>
<p>To set the rotation of object: </p>
<div class="fragment"><pre class="fragment">
rot (name) (three params for rotation)
rot (type) (index) (three params for rotation)
</pre></div> <dl class="note"><dt><b>Note:</b></dt><dd><ul>
<li>Rotations are specified as an ordered triple of angles (in degrees) about the X, Y and Z axes respectively, and the rotations are carried out about Z, then Y, then X.</li>
<li>The second syntax is implemented in order to maintain compatibility with the iCub Simulator, so 'type' must be <code>box</code>, <code>cyl</code>, or <code>sph</code>.</li>
</ul>
</dd></dl>
<p>To append an object to another object (CSG modeling): </p>
<div class="fragment"><pre class="fragment">
app (name) (type) (params)
</pre></div> <dl class="note"><dt><b>Note:</b></dt><dd><ul>
<li>As previously, 'type' must be <code>box</code>, <code>cyl</code>, or <code>sph</code>. Logically, 'params' must contain all relevant params for that type (see the 'mk' commands).</li>
<li>The names of the primitives created by 'app' are generated as for the world, however each object has its own name scope, so the first cylinder appended to some object is 'cyl1' ect.</li>
<li>You can also call 'app' on an object you created using 'mk', however this is not recommended, as it will cause the name generated by the 'mk' command (such as 'cyl1') to be somewhat misleading (as 'cyl1' would then refer to the union of two or more primitive objects.</li>
</ul>
</dd></dl>
<p>To set the position of a primitive within a CSG object: </p>
<div class="fragment"><pre class="fragment">
setp (csgName) (primitiveName) (three params for position)
</pre></div><p>To set the rotation of a primitive within a CSG object: </p>
<div class="fragment"><pre class="fragment">
rotp (csgName) (primitiveName) (three params for rotation)
</pre></div> <dl class="note"><dt><b>Note:</b></dt><dd>Rotations are specified as an ordered triple of angles (in degrees) about the X, Y and Z axes respectively, and the rotations are carried out about Z, then Y, then X.</dd></dl>
<p>To remove a primitive from a CSG object: </p>
<div class="fragment"><pre class="fragment">
rm (primitiveName) (csgName)
</pre></div><p>To remove a CSG object: </p>
<div class="fragment"><pre class="fragment">
rm (name)
</pre></div><p>To clear all objects from the world: </p>
<div class="fragment"><pre class="fragment">
clr
</pre></div> <dl class="note"><dt><b>Note:</b></dt><dd><ul>
<li>This also resets the counters used to generate names of objects and primitives</li>
</ul>
</dd></dl>
<p>2011-01-01, Kail Frank - <a href="mailto:kail@idsia.ch">kail@idsia.ch</a> </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
