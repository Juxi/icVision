# Copyright: (C) 2010 Mikhail Frank
# Author: Mikhail Frank
# CopyPolicy: Released under the terms of the GNU GPL v2.0.

SET( PARSED ${PARSED_YARPMODEL} )

IF( NOT PARSED )

	CMAKE_MINIMUM_REQUIRED ( VERSION 2.6 )

	PROJECT ( YarpModel )

	SET ( YarpModel_VERSION_MAJOR 1 )
	SET ( YarpModel_VERSION_MINOR 0 )

	MESSAGE(STATUS "*** YarpModel Project ***")

	SET ( CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/LibYarpModel/KinematicModel/CMakeScripts )

	### Find Libraries ###
	FIND_PACKAGE ( YARP REQUIRED )
		SET(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${YARP_MODULE_PATH})
		#MESSAGE(${CMAKE_MODULE_PATH})
	FIND_PACKAGE ( ACE REQUIRED )

	FIND_PACKAGE ( SOLID REQUIRED )
	FIND_PACKAGE ( OpenGL )
	FIND_PACKAGE ( Qt4 REQUIRED )
		SET ( QT_USE_QTOPENGL TRUE )
		SET ( QT_USE_QTXML TRUE )

	### Include Paths ###
	INCLUDE ( ${QT_USE_FILE} )
	INCLUDE_DIRECTORIES ( ${YARP_INCLUDE_DIRS} )
	INCLUDE_DIRECTORIES ( ${ACE_INCLUDE_DIR} )
	INCLUDE_DIRECTORIES ( "${CMAKE_CURRENT_SOURCE_DIR}/LibYarpModel" )
	INCLUDE_DIRECTORIES ( "${CMAKE_CURRENT_SOURCE_DIR}/LibYarpModel/KinematicModel/LibKinematicModel" )

	### Set some platform-specific variables ###
	SET (Q_WS_MAC FALSE)
	SET (Q_WS_X11 FALSE)
	SET (Q_WS_WIN FALSE)
	IF ( UNIX )
		IF ( APPLE )
			SET (Q_WS_MAC TRUE)
			SET (QT_MAC_USE_COCOA TRUE)
		ELSE ( APPLE )
			SET (Q_WS_X11 TRUE)
		ENDIF ( APPLE )
	ENDIF ( UNIX )
	IF ( WIN32 )
		SET (Q_WS_WIN TRUE)
		ADD_DEFINITIONS( /D "WIN32_LEAN_AND_MEAN" )
	ENDIF ( WIN32 )

	### Parse the directories where build targets are ###
	ADD_SUBDIRECTORY ( LibYarpModel )
	#ADD_SUBDIRECTORY ( FieldDemo )

	SET( PARSED_YARPMODEL true PARENT_SCOPE)

ENDIF( NOT PARSED )

