<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>VirtualSkin: Additional YARP Ports in Reflex</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
<p>In addition to the filtered motor control ports, the reflex demonstration starts the following additional YARP ports. If you are working with the iCub robot, then "NameOfYourRobot" should be replaced by "icub" or "icubSim" depending on whether you have connected the filter to the hardware or the simulator.</p>
<h2><a class="anchor" id="status">
/NameOfYourRobotF/status</a></h2>
<p>The filter status port simply streams a boolean value, indicating the status of the filter. A 1 means the filter is connected, and messages are being forwarded, whereas a 0 means that the filter has been cut, and messages are not being forwarded.</p>
<h2><a class="anchor" id="skin">
Reflex Demo</a></h2>
<p>The collision port streams the state of the geometries in the robot model with regard to whether or not they are colliding. Each collision is considered to involve exactly two geometries and to occur at exactly one point in cartesian space. That point is expressed twice, once in each of the local coordinate systems associated with the two colliding geometries (see "witnessed response" in <a href="http://www.win.tue.nl/~gino/solid/solid2.html#SEC14">FreeSOLID Documentation - Response Handling</a>). Each bottle in the stream represents a state of the entire robot, and collision events are therefore nested therein according to the following structure:</p>
<p>A point of collision on a geometry is represented in the local coordinate system of that geometry: </p>
<div class="fragment"><pre class="fragment">( geom-index x-position y-position z-position ) </pre></div><p>A collision is represented by two such collision-point-bottles nested in a third: </p>
<div class="fragment"><pre class="fragment">(( geom1-index x-position y-position z-position )( geom2-index x-position y-position z-position )) </pre></div><p>The state of the robot may involve many collisions, so they are all nested within a state-bottle. </p>
<div class="fragment"><pre class="fragment">
(
	(( geom1-index x-position y-position z-position )( geom2-index x-position y-position z-position ))
	(( geom1-index x-position y-position z-position )( geom3-index x-position y-position z-position )) 
	(( geom2-index x-position y-position z-position )( geom3-index x-position y-position z-position )) 
)
</pre></div><p>It is these state bottles that are streamed on the collisions port.</p>
<h2><a class="anchor" id="world">
/NameOfYourRobotF/world</a></h2>
<p>This RPC port allows you to add/update/remove objects to/in/from the world. The RPC commands to interact with the world are very similar to the ones you would use with the iCub Simulator. (notable exceptions follow) Moreover, naming is handled the same way as in the Simulator, so the first time you make a sphere, it is names 'sph1', the second time it is 'sph2', ect. Deleting objects does not affect this naming. Only the command <code>clr</code>, which removes all objects, can reset the counters associated with naming.</p>
<p>The World RPC Interface of Virtual Skin differs from that of icub_SIM:</p>
<ul>
<li>although commands may begin with 'world', this need not be the case</li>
<li>the objects 'box' and 'sbox', 'cyl' and 'scyl', 'sph' and 'ssph' are exactly the same respectively (Virtual Skin is not a dynamic simulation)</li>
<li>it won't hurt your commands if you specify colors, however they are not respected. The Virtual Skin visualization is currently monochrome.</li>
<li>'get' commands are currently unsupported and will return 'unknown command' (again, since there are no dynamics, objects are wherever you put them last)</li>
<li>there are commands to append objects to other objects and to delete individual objects (summarized below)</li>
</ul>
<p>Here is a list of supported commands:</p>
<p>To make a box: </p>
<div class="fragment"><pre class="fragment">
mk box (three params for size) (three params for pos) (three params for colour are ignored)
mk sbox (three params for size) (three params for pos) (three params for colour are ignored)
</pre></div><p>To make a sphere: mk sph (radius)(three params for pos) (three params for colour are ignored) mk ssph (radius)(three params for pos) (three params for colour are ignored)</p>
<p>mk cyl (radius length) (three params for pos) (three params for colour are ignored) mk scyl (radius length) (three params for pos) (three params for colour are ignored)</p>
<p>Next Steps:</p>
<ul>
<li>skin port and filter status port</li>
<li>rpc world interface</li>
<li>xml spec and collision pair filtering</li>
</ul>
<p>2011-01-01, Kail Frank - <a href="mailto:kail@idsia.ch">kail@idsia.ch</a> </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.2 </small></address>
</body>
</html>
